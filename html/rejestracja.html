<!doctype html>

<html lang="pl">
    <head>
        <script>
            setTimeout(function(){$('body').animate({opacity:'1'},500)},400);
        </script>
        <script src="/js/jquery.min.js"></script>
        <script src="/js/main.js"></script>
        <link rel='shortcut icon' type='image/x-icon' href='img/favicon.ico'/>
        <meta charset="utf-8">
        <title>SOS - Logowanie</title>
        <meta name="description" content="System Obsługi Studentów">
        <link rel="stylesheet" href="/css/main.css">
        <style>
            body {
                background-color: #2a2a2e;
                color: white;
            }

            a:link {
                text-decoration: none;
                color: white;
            }
            a:visited {
                text-decoration: none;
                color: white;
            }
            a:hover {
                text-decoration: underline;
                color: white;
            }
            a:active {
                text-decoration: underline;
                color: white;
            }

            .center-container {
                position: fixed;
                left: calc(50% - 250px);
                top: 5%;
                width: 500px;
                z-index: 1;
                padding: 20px;
                background-color: rgb(0, 80, 184, 0.8);
                padding-bottom: 50px;
                border-radius: 15px;
            }
            .login-box input {
                width: 100%;
                height: 30px;
                margin-bottom: 10px;
            }
            .login-box button {
                width: 130px;
                height: 30px;
            }
        </style>
    </head>
	<body>
        <div class="center-container">
            <div class="header">
                <p style="color:red">BETA tylko na: <a style="color:yellow" href="http://localhost.:9090/">http://localhost.:9090/</a></p>
                <h1>System Obsługi Studentów</h1>
                <h2>Zarejestruj się:</h5>
                <h1 style="color:red">REJESTRACJA WYŁĄCZONA</h1>
            </div>
            <div class="login-box">
                <label for="form-imie">Imię:</label>
                <input id="form-imie" name="imie"></input></br>
                <label for="form-nazwisko">Nazwisko:</label>
                <input id="form-nazwisko" name="nazwisko"></input></br>
                <label for="form-email">Email:</label>
                <input id="form-email" name="email"></input></br>
                <button id="register-button">Utwórz konto</button> lub
                <a href="/logowanie.html">Zaloguj się</a>
                <div id='info' style='color:yellow;margin:20px'></div>
            </div>
        </div>

        <script>
            $("#info").hide();
            if (getCookie("token") != null) {
				document.location.href = "/";
			}

            $("#register-button").click(function() {              
				data_json_register = {
					"imie" : $("#form-imie").val(),
					"nazwisko" : $("#form-nazwisko").val(),
                    "email" : $("#form-email").val()
				}
                
				$.ajax({
					url: '/api/rejestracja',
					type: "POST",
					data: JSON.stringify(data_json_register),
					contentType: "application/json; charset=UTF-8",
					success: function (data) {					
						if(data.status != 200){
							console.log("Wystąpił błąd!");
						} else if (data.status == 200){
							alert("Po aktywacji konta na podany email otrzymasz dane dotyczące logowania.");
                            let login = "login";
                            let haslo = "haslo"
                            $("#form-imie").prop("disabled",true);
                            $("#form-nazwisko").prop("disabled",true);
                            $("#form-email").prop("disabled",true);
                            $("#info").append("<b>Dane dotyczące logowania:</b></br>");
                            $("#info").append(login+" : "+haslo);
                            $("#info").show();
						}
					}
				});
			});

        </script>
	</body>
</html>